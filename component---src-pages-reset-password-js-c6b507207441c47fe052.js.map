{"version":3,"sources":["webpack:///./node_modules/react-bootstrap/esm/Alert.js","webpack:///./src/pages/ResetPassword.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","DivStyledAsH4","displayName","AlertHeading","Component","AlertLink","defaultProps","variant","show","transition","closeLabel","Alert","uncontrolledProps","ref","_useUncontrolled","bsPrefix","closeVariant","className","children","onClose","dismissible","props","prefix","handleClose","e","Transition","alert","role","undefined","concat","onClick","unmountOnExit","Link","Heading","ResetPassword","passwordRef","useRef","useState","error","setError","message","setMessage","loading","setLoading","email","setEmail","validURL","setValidURL","a","window","searchParams","URLSearchParams","location","search","actionCode","get","handleResetPassword","current","value","ret","String","useEffect","mode","verifyResetLink","run","title","style","maxWidth","borderColor","borderWidth","Body","fontWeight","backgroundColor","color","onSubmit","preventDefault","callReset","Group","id","Label","Control","type","required","disabled","to"],"mappings":"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","file":"component---src-pages-reset-password-js-c6b507207441c47fe052.js","sourcesContent":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.object.assign\";\nimport _defineProperty from \"C:/Users/Gurpreet Singh/Documents/Gatsby/Appraisir/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"C:/Users/Gurpreet Singh/Documents/Gatsby/Appraisir/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport divWithClassName from './divWithClassName';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nvar AlertHeading = createWithBsPrefix('alert-heading', {\n  Component: DivStyledAsH4\n});\nvar AlertLink = createWithBsPrefix('alert-link', {\n  Component: Anchor\n});\nvar defaultProps = {\n  variant: 'primary',\n  show: true,\n  transition: Fade,\n  closeLabel: 'Close alert'\n};\nvar Alert = /*#__PURE__*/React.forwardRef(function (uncontrolledProps, ref) {\n  var _useUncontrolled = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  }),\n      bsPrefix = _useUncontrolled.bsPrefix,\n      show = _useUncontrolled.show,\n      closeLabel = _useUncontrolled.closeLabel,\n      closeVariant = _useUncontrolled.closeVariant,\n      className = _useUncontrolled.className,\n      children = _useUncontrolled.children,\n      variant = _useUncontrolled.variant,\n      onClose = _useUncontrolled.onClose,\n      dismissible = _useUncontrolled.dismissible,\n      transition = _useUncontrolled.transition,\n      props = _objectWithoutProperties(_useUncontrolled, [\"bsPrefix\", \"show\", \"closeLabel\", \"closeVariant\", \"className\", \"children\", \"variant\", \"onClose\", \"dismissible\", \"transition\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  var handleClose = useEventCallback(function (e) {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  var Transition = transition === true ? Fade : transition;\n\n  var alert = /*#__PURE__*/_jsxs(\"div\", _objectSpread(_objectSpread({\n    role: \"alert\"\n  }, !Transition ? props : undefined), {}, {\n    ref: ref,\n    className: classNames(className, prefix, variant && \"\".concat(prefix, \"-\").concat(variant), dismissible && \"\".concat(prefix, \"-dismissible\")),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  }));\n\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, _objectSpread(_objectSpread({\n    unmountOnExit: true\n  }, props), {}, {\n    ref: undefined,\n    \"in\": show,\n    children: alert\n  }));\n});\nAlert.displayName = 'Alert';\nAlert.defaultProps = defaultProps;\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});","\r\nimport React, { useRef, useState, useEffect } from \"react\"\r\nimport { Form, Button, Card, Alert, Container } from \"react-bootstrap\"\r\nimport { loggedUser,handleResetPassword,verifyResetLink} from  \"../components/FirebaseAuth\"\r\nimport { Link } from \"gatsby\"\r\nimport { PageLayout } from \"../components\"\r\nimport { SEO } from \"../utils\"\r\n\r\nexport default function ResetPassword() \r\n{\r\n  const passwordRef = useRef()\r\n  const [error, setError] = useState(\"\")\r\n  const [message, setMessage] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const [email, setEmail] = useState(\"\")\r\n  const [validURL, setValidURL] = useState(false)\r\n\r\n  useEffect( () => \r\n  {\r\n    async function run()\r\n    {\r\n      let searchParams\r\n      if (typeof window !== 'undefined') \r\n      { searchParams = new URLSearchParams(window.location.search); }\r\n\r\n      let actionCode \r\n      let mode \r\n      if(searchParams)\r\n      {\r\n        actionCode = searchParams.get('oobCode')\r\n        mode = searchParams.get('mode')\r\n      }\r\n      //console.log(mode,actionCode)\r\n\r\n      if(mode == \"resetPassword\")\r\n      {\r\n        let ret = await verifyResetLink(actionCode)\r\n        //console.log(\"ret code is\",ret)\r\n        if( ret )\r\n        { \r\n          if( ret[\"error\"] == undefined)\r\n          {\r\n            setValidURL(true)\r\n            setEmail( String(ret) )\r\n            setError(\"\")\r\n          }\r\n          else if (ret[\"error\"] != undefined)\r\n          {\r\n            setError(String(ret[\"error\"]))\r\n          }\r\n        }\r\n        else\r\n        {\r\n          setError(\"Invalid URL. That URL may have expired.\")\r\n        }\r\n      }\r\n      else\r\n      {\r\n        setError(\"Invalid URL. Please refresh with a valid URL.\")\r\n      }\r\n    }\r\n    run()  \r\n  },[])\r\n\r\n  async function callReset()\r\n  {\r\n    let searchParams\r\n    if (typeof window !== 'undefined') \r\n    { searchParams = new URLSearchParams(window.location.search); }\r\n\r\n    let actionCode\r\n    if(searchParams)\r\n    { actionCode = searchParams.get('oobCode') }\r\n    let ret = await handleResetPassword(actionCode,email,passwordRef.current.value)\r\n\r\n    if(ret)\r\n    {\r\n      if( ret[\"error\"] == undefined)\r\n      {\r\n        setMessage(\"You have successfully reset your password and have been logged in!\")\r\n      }\r\n      else if (ret[\"error\"] != undefined)\r\n      {\r\n        setError(String(ret[\"error\"]))\r\n      }\r\n    }\r\n    else\r\n    {\r\n      setError(\"Password reset failed.\")\r\n    }\r\n  }\r\n\r\n  function handleSubmit(e) \r\n  {\r\n    e.preventDefault()\r\n    try \r\n    {\r\n      setMessage(\"\")\r\n      setError(\"\")\r\n      setLoading(true)\r\n      callReset()\r\n    } \r\n    catch \r\n    {\r\n      setError(\"Failed to reset password\")\r\n    }\r\n    setLoading(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PageLayout>\r\n        <SEO title=\"Forget Password\" />\r\n        <Container className=\"d-flex align-items-center justify-content-center\" >\r\n          <div className=\"w-100 text-color\" style={{ maxWidth: \"400px\" }}>\r\n            <Card style={{ borderColor:\"grey\",borderWidth:\"3px\" }}>\r\n              <Card.Body>\r\n\r\n                <h2 className=\"text-center mb-4\">Password Reset</h2>\r\n                {error && <Alert style={{fontWeight:\"900\",backgroundColor:\"#d9534f\",color:\"white\",borderColor:\"#d9534f\"}}>{error}</Alert>}\r\n                {message && <Alert style={{fontWeight:\"900\",backgroundColor:\"#5cb85c\",color:\"white\",borderColor:\"#5cb85c\"}}>{message}</Alert>}\r\n\r\n                {validURL &&\r\n                  <Form onSubmit={handleSubmit}>\r\n                    {email && <div> Welcome {email} <br/><br/> </div>}\r\n                    <Form.Group id=\"password\">\r\n                      <Form.Label>New Password</Form.Label>\r\n                      <Form.Control type=\"password\" ref={passwordRef} required />\r\n                    </Form.Group>\r\n                    <Button disabled={loading} className=\"w-100\" type=\"submit\">\r\n                      Reset Password\r\n                    </Button>\r\n                  </Form>\r\n                }\r\n                <div className=\"w-100 text-center mt-3\">\r\n                  <Link to=\"/Login\">Login</Link>\r\n                </div>\r\n                \r\n              </Card.Body>\r\n            </Card>\r\n\r\n            <div className=\"w-100 text-center mt-2\">\r\n              Need an account? <Link to=\"/Signup\">Sign Up</Link>\r\n            </div>\r\n          </div>\r\n        </Container>\r\n      </PageLayout>\r\n    </>\r\n  )\r\n}"],"sourceRoot":""}