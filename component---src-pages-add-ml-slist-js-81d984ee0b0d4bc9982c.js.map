{"version":3,"sources":["webpack:///./src/pages/AddMLSlist.js"],"names":["handleSubmit","evt","a","preventDefault","form","target","data","FormData","stateData","get","console","log","db","firebase","firestore","collection","doc","mlsList","then","querySnapshot","forEach","dataRet","hPrice","hSize","hBeds","hBaths","price","parseInt","building_size","size","beds","baths","obj","String","id","push","entry","set","catch","error","className","onSubmit","style","display","Control","type","name","value"],"mappings":"8kBAWe,qBAIb,IAAMA,EAAY,6BAAG,WAAOC,GAAP,yBAAAC,EAAA,6DAEnBD,EAAIE,iBACEC,EAAOH,EAAII,OACbC,EAAO,IAAIC,SAASH,GAEpBI,EAAYF,EAAKG,IAAI,QAEzBC,QAAQC,IAAI,gBAAgBH,GAExBI,EAAKC,IAASC,YAAYC,WAAW,UAAUC,IAAIR,GAAWO,WAAW,UAEzEE,EAAU,GAZK,SAabL,EAAGH,MAAMS,KAAT,6BAAe,WAAOC,GAAP,SAAAjB,EAAA,sDAEnBiB,EAAcC,SAAQ,SAACJ,GAGnB,IAAIK,EAAUL,EAAIV,OACdgB,GAAU,EAAGC,GAAS,EAAGC,GAAS,EAAGC,GAAU,EAChDJ,EAAQK,QACTJ,EAASK,SAASN,EAAQK,QAEzBL,EAAQO,eAAiBP,EAAQO,cAAcC,OAChDN,EAAQI,SAASN,EAAQO,cAAcC,OAEtCR,EAAQS,OACTN,EAAQG,SAASN,EAAQS,OAExBT,EAAQU,QACTN,EAASE,SAASN,EAAQU,QAE5B,IAAIC,EAAM,CAAC,IAAMC,OAAOjB,EAAIkB,IAAI,MAAQZ,EAAO,KAAOC,EAAM,KAAOC,EAAM,MAAQC,GACjFf,QAAQC,IAAIK,EAAIkB,GAAI,OAAQF,GAC5Bf,EAAQkB,KAAKH,MArBE,2CAAf,uDAba,OAuCnBtB,QAAQC,IAAI,eAAeM,IAEvBmB,EAAQ,IACP,KAAWnB,EAEhBJ,IAASC,YAAYC,WAAW,UAAUC,IAAIR,GAAW6B,IAAID,GAC5DlB,MAAK,WACJR,QAAQC,IAAI,qCAEb2B,OAAM,SAACC,GAEJ7B,QAAQC,IAAI,UAAW4B,MAlDR,4CAAH,sDAuDlB,OACE,oCACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAWC,UAAU,8CACnB,8DACA,0BAAMC,SAAUzC,EAAcwC,UAAU,aAAaE,MAAO,CAACC,QAAQ,iBAArE,iBACgB,kBAAC,IAAKC,QAAN,CAAcC,KAAK,OAAOC,KAAK,SAC7C,6BACA,kBAAC,IAAD,CAAQD,KAAK,SAASE,MAAM,OAA5B","file":"component---src-pages-add-ml-slist-js-81d984ee0b0d4bc9982c.js","sourcesContent":["import React, {useState, useEffect, useContext } from \"react\"\r\nimport { PageLayout } from \"../components\"\r\nimport { Container, Image  } from \"react-bootstrap\"\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css'; // or include from a CDN\r\nimport firebase from \"../components/firebase\"\r\n\r\n\r\n\r\nexport default () =>\r\n{\r\n\r\n\r\n  const handleSubmit = async (evt) => \r\n  {\r\n    evt.preventDefault();\r\n    const form = evt.target;\r\n    let data = new FormData(form);\r\n\r\n    let stateData = data.get(\"Name\")\r\n\r\n    console.log(\"the State is \",stateData)\r\n    \r\n    let db = firebase.firestore().collection('States').doc(stateData).collection('buffer')\r\n\r\n    let mlsList = []\r\n    await db.get().then( async (querySnapshot) => \r\n    {\r\n      querySnapshot.forEach((doc) => \r\n      {\r\n          // doc.data() is never undefined for query doc snapshots\r\n          let dataRet = doc.data()\r\n          let hPrice = -1, hSize = -1, hBeds = -1, hBaths = -1\r\n          if(dataRet.price)\r\n          { hPrice = parseInt(dataRet.price)}\r\n\r\n          if(dataRet.building_size && dataRet.building_size.size)\r\n          { hSize = parseInt(dataRet.building_size.size)}\r\n\r\n          if(dataRet.beds)\r\n          { hBeds = parseInt(dataRet.beds)}\r\n          \r\n          if(dataRet.baths)\r\n          { hBaths = parseInt(dataRet.baths)}\r\n\r\n          let obj = {\"mls\":String(doc.id),\"price\":hPrice,\"sqft\":hSize,\"beds\":hBeds,\"baths\":hBaths}\r\n          console.log(doc.id, \" => \", obj);\r\n          mlsList.push(obj)\r\n      });\r\n    \r\n    });\r\n    \r\n    console.log(\"mls list is \",mlsList)\r\n\r\n    let entry = {}\r\n    entry[\"list\"] = mlsList\r\n\r\n    firebase.firestore().collection('States').doc(stateData).set(entry)\r\n    .then(() => {\r\n      console.log(\"Document successfully updated!\");\r\n    })\r\n    .catch((error) => \r\n    {\r\n        console.log(\"Error :\", error);\r\n    });\r\n  }\r\n\r\n\r\n  return(\r\n    <>\r\n    <PageLayout>\r\n      <Container className=\" align-items-center justify-content-center\" >\r\n        <h3>enter state to create MLS list</h3>\r\n        <form onSubmit={handleSubmit} className=\"text-color\" style={{display: `inline-block`}}>\r\n          State Abbrev: <Form.Control type='text' name='Name'/>\r\n          <br/>\r\n          <Button type=\"submit\" value=\"Add\"> Submit</Button>\r\n        </form> \r\n        \r\n      </Container>\r\n\r\n    </PageLayout>\r\n    </>\r\n  )\r\n}"],"sourceRoot":""}